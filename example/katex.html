<!DOCTYPE html>
<html lang="en-us">
<head>
	<title>ASCIIMath input, LaTeX and KaTeX output</title>
	<meta charset="utf-8"/>
	<!--<link rel="stylesheet" href="../js/katex/katex.min.css"/>-->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"/>
	<link rel="stylesheet" href="../css/note.css"/>
</head>
<body>

<h4>Asciimath input</h4>

<textarea id="asciimathInput" rows="3" cols="80">
x = (-b+-sqrt(b^2-4ac))/(2a)
</textarea>

<h4>LaTeX output</h4>

<p id="latexOutput"
   style='font-family: "DejaVu Sans Mono", consolas, monospace;
   font-size: 0.8em'>
</p>

<h4>KaTeX output</h4>

<div id="katexOutput"></div>
 
<script src="../js/AMsymbols.js"></script>
<script>
function loadScript(t,e){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.readyState?a.onreadystatechange=function(){("loaded"==a.readyState||"complete"==a.readyState)&&(a.onreadystatechange=null,e&&"function"==typeof e&&e())}:a.onload=function(){e&&"function"==typeof e&&e()},a.src=t,document.head.appendChild(a)}

loadScript('../js/asciimath-katex.js', function() { 
	loadScript('../js/katex/katex.min.js', function() { 
		asciimathInput.onkeyup = function(event) {
			if (event.keyCode || event.which)
				doOutput();
		};
		function doOutput() {
			var input = asciimathInput.value;		
			katexOutput.innerHTML = "`"+input+"`";
			if (typeof(AMTEX) != "undefined") {
				AMTEX();
				latexOutput.innerHTML = texstring; // texstring comes from asciimath-katex.js
			}
		} 	 
		doOutput();
		doOutput();
	});
});
</script>
</body>
</html>
