<!DOCTYPE html>
<html lang="zh-cn">

<head>

<title>index</title>
<meta charset="utf-8" />
<style type="text/css">
* {
	margin: 0;
	padding: 0;
}

body {
	text-rendering: optimizeLegibility;
	font-family: "-apple-system", "Helvetica Neue", "Roboto", "Segoe UI", sans-serif;
	overflow-x: hidden;
	background: #eeee99; /* yellow */
	/* rgb(195, 193, 255) Thanos purple */
	/* rgb(189, 252, 141) pink green */
}

header {
	display: table;
	position: absolute;
	width: 100%;
	top: 0;
	left: 0;
	right: 0;
	height: 2.5em;
	line-height: 2.5em;
	text-align: center;
	font-size: 1.5em;
	font-weight: 500;
	border-color: #000;
	background-color: #444;
	color: #fff;
}

header button {
	display: table-cell;
	border: 0;
	height: 2.5em;
	width: 2.5em;
	color: inherit;
	font-size: inherit;
	font-weight: inherit;
	background: rgba(0,0,0,0);
	cursor: pointer;
}

header span {
	display: table-cell;
}

#nav {
	position: fixed;
	top: 0;
	left: 0;
	bottom: 0;
	width: 16em;
	display: flex;
	flex-flow: column nowrap;
	overflow-y: auto;
	background: #fcfcfc;
	box-shadow: inset -14px 0px 5px -12px rgb(210,210,210);
	border-right: 1px #444;
}

#table-of-contents {
	margin-top: 2.5em;
	height: 100%;
	overflow: auto;
	list-style-type: none;
	color: #45a;
}

#table-of-contents ul {
	list-style-type: none;
}

#table-of-contents li {
	padding-left: 1em;
	line-height: 2em;
}

#table-of-contents ul li {
	color: black;
}

#table-of-contents ul li:hover {
	text-decoration: underline;
	cursor: pointer;
}

#article {
	position: absolute;
	margin-left: 16em;
	width: 100%;
	height: 100%;
}

#iframe {
	display: table;
	padding: 0;
	border: 0;
	width: 100%;
	height: 100%;
}

@media screen and (min-resolution: 150dpi) {
	body {
		font-size: 42px;
		background: #eeeedd; /* lighter yellow */
	}

	div.graph {
		height: 15em;
	}
}

</style>

</head>

<body>

<nav id="nav">
	<ul id="table-of-contents"></ul>
	<header>
		<button onclick="prevArticle()">&lt;</button>
		<span>目录</span>
		<button onclick="nextArticle()")>&gt;</button>
	</header>
</nav>

<article id="article">
	<iframe id="iframe" src="pde/2.html"></iframe>
	<header>
		<button onclick="hideNav()">&Xi;</button>
		<span id="article-title"></span>
		<button>+</button>
	</header>
</article>


<script src="js/table-of-contents.js"></script>
<script>
'use strict';
var toc = document.getElementById('table-of-contents');
var iframe = document.getElementById('iframe');
var artitle = document.getElementById('article-title');
var groupIdx = parseInt(window.localStorage['groupIndex'+domain]) || 0;
var articleIdx = parseInt(window.localStorage['articleIndex'+domain]) || 0;

function jump() {
	iframe.setAttribute('src', tableOfContents[groupIdx].articles[articleIdx].src);
	artitle.innerHTML = tableOfContents[groupIdx].articles[articleIdx].title;
	window.localStorage['groupIndex'+domain] = groupIdx;
	window.localStorage['articleIndex'+domain] = articleIdx;
	hideNav();
}

function prevArticle() {
	if (articleIdx == 0) {
		if (groupIdx == 0) {
			console.warn('already at first article.');
			return;
		}
		articleIdx = tableOfContents[--groupIdx].articles.length;
	}
	--articleIdx;
	jump();
};

function nextArticle() {
	if (articleIdx == tableOfContents[groupIdx].articles.length-1) {
		if (groupIdx == tableOfContents.length-1) {
			console.warn('$no more articles.');
			return;
		}
		++groupIdx;
		articleIdx = -1;
	}
	++articleIdx;
	jump();
};

// load page
jump();

function jumpto(i, j) {
	return function() {
		groupIdx = i;
		articleIdx = j;
		jump();
	}
}

// load table of contents
for (var i = 0; i < tableOfContents.length; ++i) {
	var li0 = document.createElement('li');
	li0.innerHTML = tableOfContents[i].title;
	var ul = document.createElement('ul');
	for (var j = 0; j < tableOfContents[i].articles.length; ++j) {
		var li = document.createElement('li');
		li.innerHTML = tableOfContents[i].articles[j].title;
		li.onclick = jumpto(i, j);
		ul.appendChild(li);

	}
	li0.appendChild(ul);
	toc.appendChild(li0);
}
</script>

<script>
function hideNav() {
	var nav = document.getElementById('nav');
	var article = document.getElementById('article');
	if (nav.hidden) {
		nav.removeAttribute('hidden');
		nav.style.width = '16em';
		article.style.marginLeft = '16em';
	} else {
		nav.hidden = true;
		nav.style.width = '0';
		article.style.marginLeft = '0';
	}
}
</script>

</body>

</html>
