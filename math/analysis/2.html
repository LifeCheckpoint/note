<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <title>数列的极限</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="../../css/note.css" />
</head>
<body>

<h2>数列极限的定义</h2>

<p class="definition">
	能与全体自然数建立一一对应的集合称为<b>序列</b>, 记为
	<span class="formula">
		`x_1, x_2, x_3, cdots`,
	</span>
	简写为 `{x_n}_(n=1)^oo` 或 `{x_n}`.
	序列的第 `n` 项 `x_n` 称为它的<b>通项</b>.
	如果序列中的每一元素都是实数, 就称它为<b>实数列</b>, 简称<b>数列</b>.
</p>

<p class="definition">
	设 `a in RR`, `{x_n}` 为一数列. 如果对任意正实数 `epsi`,
	都存在相应的正整数 `N`, 使对任意的 `n gt N`, 成立
	<span class="formula">
		`|x_n - a| lt epsi`,
	</span>
	则称数列 `{x_n}` <b>收敛</b>, 它的<b>极限</b>为 `a`, 记为
	`lim_(n to oo) x_n = a`, 或 `x_n to a` (`n to oo`).
	等价的说法是, 当 `n` 趋于正无穷大时, `x_n` 趋于 `a` 或以 `a` 为极限.
	反之, 如果数列的极限不存在, 则称它<b>发散</b>.
</p>

<p class="remark">
	我们把数列极限的这种定义采用的数学表述称为 `epsi-N` 语言.</br>
	注意, 按照定义, 我们只需证明对小的正数 `epsi` 成立 `|x_n - a| lt epsi`
	即可. 因此证明的时候可以根据实际情况加上 `epsi lt 1`
	的限制条件等.</br>
	另外, `AA n gt N`, `|x_n - a| lt epsi`
	的另一种说法是, <b>对充分大的 `bm n`</b> 成立上式.</br>
	最后, 不等式 `|x_n - a| lt epsi` 的一个等价的写法是
	<span class="formula">
		`a - epsi lt x_n lt a + epsi`.
	</span>
</p>

<p class="proposition">
	`lim_(n to oo) x_n = a` `iff lim_(n to oo) (x_n - a) = 0`.
</p>

<p class="proposition" id="prop-diff">
	若 `lim_(n to oo) x_n = a`, 则
	`lim_(n to oo) (x_n - y_n) = 0` `iff {y_n}` 的极限存在, 且等于 `a`.
</p>

<ol class="proof">
	<li>对任意 `epsi gt 0`, 由 `lim_(n to oo) x_n = a`, 存在正整数 `N`
		使得
		<span class="formula">
			`|x_n - a| lt epsi/2`, `AA n gt N`.
		</span>
		由 `lim_(n to oo) (x_n-y_n) = 0`, 存在正整数 `M` 使得
		<span class="formula">
			`|x_n - y_n| lt epsi/2`, `AA n gt M`.
		</span>
		于是对任意 `n gt max{N, M}`, 应用三角不等式有
		<span class="formula">
			`|y_n - a| le |y_n - x_n| + |x_n - a| lt epsi`.
		</span>
	</li>
	<li>现在设 `lim_(n to oo) x_n = lim_(n to oo)  y_n = a`,
		则对任意 `epsi gt 0`, 存在正整数 `N, M` 使得
		<span class="formula">
			`|x_n - a| lt epsi/2`, `AA n gt N`;<br/>
			`|y_n - a| lt epsi/2`, `AA n gt M`.
		</span>
		类似地对 `n gt max{N, M}` 应用三角不等式即得结论.
	</li>
</ol>

<ol class="example">
	<li><b>对数</b> `lim_(n to oo) 1/(log_a n) = 0`, 其中 `a gt 1`.</li>
	<li><b>p 数列</b> `lim_(n to oo) 1/n^p = 0`, 其中 `p gt 0`;</li>
	<li><b>等比数列</b> `lim_(n to oo) q^n = 0`, 其中 `0 lt q lt 1`;</li>
	<li><b>n 次方根</b> `lim_(n to oo) root n a = 1`, 其中 `a gt 0`,
		`a != 1`;
	</li>
</ol>

<ol class="proof">
	<li>`AA epsi gt 0`, 取正整数 `N gt a^(1/epsi)`, 则
		`log_a N gt 1/epsi`, 从而 `AA n gt N`,
		<span class="formula">
			`|1/(log_a n)| lt 1/(log_a N) lt epsi`.
		</span>
	</li>
	<li>`AA epsi gt 0`, 取正整数 `N gt (1/epsi)^(1/p)`, 则
		`N^p gt 1/epsi`, 从而 `AA n gt N`,
		<span class="formula">
			`|1/n^p| lt 1/N^p lt epsi`.
		</span>
	</li>
	<li>`AA epsi gt 0`, 不妨令 `epsi lt 1`.
		取正整数 `N gt (log_2 epsi)/(log_2 q)`, 则
		`N log_2 q lt log_2 epsi`. 从而 `AA n gt N`,
		<span class="formula">
			`|q^n| lt q^N lt epsi`.
		</span>
	</li>
	<li>`AA epsi gt 0`, 先设 `a gt 1`, 取正整数 `N gt (log_2
		a)/(log_2(1+epsi))`, 则 `N log_2(1+epsi) gt log_2 a`,
		`(1+epsi)^N gt a`.  从而 `AA n gt N`,
		<span class="formula">
			`|root n a - 1| lt root N a - 1 lt (1+epsi)-1 = epsi`.
		</span>
		再设 `a lt 1`, 不妨令 `epsi lt 1`.
		取正整数 `N gt (log_2 a)/(log_2(1-epsi))`, 则
		`log_2 a gt N log_2(1-epsi)`, `a gt (1-epsi)^N`,
		`root N a gt 1-epsi`. 从而 `AA n gt N`,
		<span class="formula">
			`|1 - root n a| lt 1 - root N a lt 1-(1-epsi) = epsi`.
		</span>
	</li>
</ol>

<h2>有界数列, 无穷大与无穷小, 两边夹法则</h2>

<p class="definition">
	设 `{x_n}` 为一数列. 如果存在实数 `A, B` 使成立
	<span class="formula">
		`A le x_n le B`, `AA n in ZZ^+`,
	</span>
	则称 `{x_n}` <b>有界</b>, 否则称它<b>无界</b>.
</p>

<p class="corollary">
	数列 `{x_n}` 有界当且仅当存在正实数 `M`, 对充分大的 `n` 成立
	<span class="formula">
		`|x_n| le M`.
	</span>
</p>

<p class="proof">
	先设 `{x_n}` 有界. 则存在实数 `A, B` 使成立
	<span class="formula">
		`A le x_n le B`, `AA n in ZZ^+`.
	</span>
	取 `M = max{|A|, |B|}`, 则
	<span class="formula">
		`|x_n| le M`, `AA n in ZZ^+`.
	</span>
	反之设存在正实数 `M` 和正整数 `N`, 成立
	<span class="formula">
		`|x_n| le M`, `AA n gt N`,
	</span>
	取 `M' = max{x_1, x_2, cdots, x_N, M}`, 则
	<span class="formula">
		`|x_n| le M'`, `AA n in ZZ^+`.
	</span>
	再取 `A = -M', B = M'` 即得结论.
</p>

<p class="definition">
	如果 `lim_(n to oo) x_n = 0`, 则称 `{x_n}`
	是一个<b>无穷小量</b>或无穷小.
	如果 `AA M gt 0`, 对充分大的 `n` 有 `|x_n| gt M`, 则称 `{x_n}`
	趋于无穷大, 或 `x_n` 是一个<b>无穷大量</b>. 其中,
	如果 `AA M gt 0`, 对充分大的 `n` 有 `x_n gt M` (`x_n lt -M`),
	则称 `{x_n}` 趋于正无穷大 (负无穷大), 记为
	`lim_(n to oo) x_n = +oo` (`-oo`) 或 `x_n to +oo` (`-oo`),
	当 `n to oo`.
</p>

<p class="proposition">
	若 `{x_n}` 是无穷大且 `x_n != 0`, 则 `{1/x_n}` 是无穷小;
	反之若 `{y_n}` 是无穷小且 `y_n != 0`, 则 `{1/y_n}` 是无穷大.
</p>

<p class="proof">
	只证第一个结论, 第二个结论类似.
	`AA epsi gt 0`,
	由 `{x_n}` 是无穷大知存在正整数 `N`, 使得
	<span class="formula">
		`|x_n| gt 1/epsi`, `AA n gt N`.
	</span>
	即
	<span class="formula">
		`|1/x_n| lt epsi`, `AA n gt N`.
	</span>
</p>

<p class="proposition">
	设 `{x_n}` 是无穷小, `{y_n}` 有界, 则 `{x_n y_n}` 是无穷小.
</p>

<p class="proof">
	由 `{y_n}` 有界知存在 `M gt 0` 使得 `|y_n| le M`, `AA n in ZZ^+`.
	`AA epsi gt 0`, 由极限定义, 存在正整数 `N` 使成立
	<span class="formula">
		`|x_n| lt epsi/M`, `AA n gt N`.
	</span>
	从而
	<span class="formula">
		`|x_n y_n| lt epsi/M M = epsi`.
	</span>
</p>

<p class="proposition" id="prop-smaller">
	设 `{x_n}` 是无穷小, 且对充分大的 `n`, 有 `|y_n| le |x_n|`, 则 `{y_n}`
	是无穷小.
</p>

<p class="proof">
	由已知, 存在正整数 `M` 使得
	<span class="formula">
		`|y_n| le |x_n|`, `AA n gt M`.
	</span>
	`AA epsi gt 0`, 由极限定义, 存在正整数 `N`, 使得
	<span class="formula">
		`|x_n| lt epsi`, `AA n gt N`.
	</span>
	从而 `n gt max{M, N}` 时,
	<span class="formula">
		`|y_n| le |x_n| lt epsi`.
	</span>
</p>

<ol class="example">
	<li>`lim_(n to oo) (n!)/n^n = 0`, `lim_(n to oo) n^n/((2n)!) = 0`.</li>
	<li>`lim_(n to oo) a^n/(n!) = 0`, `a in RR`;</li>
	<li>`lim_(n to oo) n^p/a^n = 0`, `a gt 1`, `p gt 0`;</li>
	<li>`lim_(n to oo) (log_a n)/n^p = 0`, `a gt 1`, `p gt 0`.</li>
</ol>

<ol class="proof">
	<li>只需注意到 `AA n in ZZ^+`, `(n!)/n^n le 1/n`, `n^n/((2n)!) lt
		1/(n!)`;
	</li>
	<li>取正整数 `N gt |a|`, 则存在实数 `r` 使 `|a|/N lt r lt 1`.
        对任意 `n gt N` 有
		<span class="formula">
			`|a^n/(n!)|`
            `= |a|/n * |a|/(n-1) cdots |a|/(N+1) * |a|^N/(N!)`
            `lt r^(n-N) |a|^N/(N!)`.
		</span>
		因为 `r^n` 是无穷小, `r^-N |a|^N/(N!)` 是有界量,
		所以上式右端是无穷小, 因此 `a^n/(n!)` 是无穷小.
	</li>
	<li>设 `a = 1 + r`, `r gt 0`. 取正整数 `N gt p`, 当 `n gt 2N` 时,
        `n - N gt n/2`,
		利用二项式定理有
        <span class="formula">
          `a^n = (1+r)^n`
          `= sum_(k=0)^n (n;k) r^k`
          `gt (n;N) r^N`
          `= (n * (n-1) cdots (n-N+1))/(N!) r^N`
          `gt (n-N)^N r^N // N!`
          `gt ((n r)/2)^N // N!`.
        </span>
        于是 `|n^p/a^n| lt n^p N! (2/(n r))^N`, 其中 `n^(p-N)` 是无穷小,
        其余因子为有界量. 因此 `n^p/a^n` 是无穷小.
	</li>
	<li>`AA epsi gt 0`, 由 3 知存在正整数 `M`, 使得
		<span class="formula">
			`n/a^n lt p/a epsi`, `AA n gt M`.
		</span>
		取正整数 `N gt a^(M/p)`, 则 `p log_a N gt M`.
		`AA n gt N`, 记 `m = |__p log_a n__|+1`, 于是 `m gt M`.
		从而
		<span class="formula">
			`|(log_a n)/n^p| = 1/p (p log_a n)/(a^(p log_a n))`
			`lt 1/p m/a^(m-1)`
			`= a/p m/a^m`
			`lt epsi`.
		</span>
	</li>
</ol>

<p class="proof">
    也可以利用正项级数的审敛法. 一旦级数收敛, 它的通项就趋于 0. 如设
    `x_n = (n!)/n^n`, 则
    <span class="formula">
        `x_(n+1) / x_n = n^n/(n+1)^n to 1/e lt 1`,
    </span>
    则级数 `sum_(n ge 1) x_n` 收敛, 其通项趋于 0.
    2, 3 小题类似.
</p>

<p class="theorem">
	<b>两边夹法则 (squeezing theorem)</b>
	设数列 `{x_n}, {y_n}, {z_n}` 对充分大的 `n` 满足 `x_n le y_n le z_n`,
	且 `lim_(n to oo) x_n = lim_(n to oo) z_n = a`, 则 `{y_n}`
	的极限也存在且等于 `a`.
</p>

<p class="proof">
	设对 `AA n gt N_1` 成立 `x_n le y_n le z_n`, `AA epsi gt 0`,
	由极限定义, 存在正整数 `N_2, N_3` 使成立
	<span class="formula">
		`a - epsi lt x_n lt a + epsi`, `AA n gt N_2`,<br/>
		`a - epsi lt z_n lt a + epsi`, `AA n gt N_3`.
	</span>
	从而 `n gt max{N_1, N_2, N_3}` 时,
	<span class="formula">
		`a - epsi lt x_n le y_n le z_n lt a + epsi`,
	</span>
	即 `lim_(n to oo) y_n = a`.
</p>

<p class="proof">
	记 `a_n = y_n - x_n`, `b_n = z_n - x_n`, `n = 1, 2, cdots`.
	由<a class="ref" href="#prop-diff"></a>知 `b_n` 是无穷小,
	而 `|a_n| le |b_n|`, 故由<a class="ref" href="#prop-smaller"></a>知
	`a_n` 也是无穷小. 再次应用<a class="ref" href="#prop-diff"></a> `y_n` 的极限存在, 且等于 `a`.
</p>

<p class="example">
	`lim_(n to oo) root n n = 1`.
</p>

<p class="proof">`n gt 2` 时, 应用均值不等式有
	<span class="formula">
		`   1 lt root(n)(n)`
		`=  root(n)(sqrt n * sqrt n * 1)`
		`lt (2 sqrt n + n - 2)/n`
		`lt 2/sqrt n + 1`.
	</span>
	由两边夹法则, `lim_(n to oo) root n n = 1`.
</p>

<h2>数列极限的性质与四则运算</h2>

<p class="property">
	<b>数列极限的惟一性</b>
	若数列有极限, 极限必惟一.
</p>

<p class="proof">
	设 `lim_(n to oo) x_n = a`, 且 `lim_(n to oo) x_n = b`.
	如果 `a != b`, 不妨设 `a lt b`, 取 `epsi = (b-a)//2 gt 0`,
	由极限的定义知分别存在正整数 `M, N`, 使得
	<span class="formula">
		`a - epsi lt x_n lt a + epsi`, `quad n gt M`;<br/>
		`b - epsi lt x_n lt b + epsi`, `quad n gt N`.
	</span>
	从而当 `n gt max{M, N}` 时, 以上两式皆成立, 有
	<span class="formula">
		`(a+b)//2 = b - epsi lt x_n lt a + epsi = (a+b)//2`,
	</span>
	矛盾. 所以必有 `a = b`.
</p>

<p class="property">
	<b>收敛数列的有界性</b>
	如果 `{x_n}` 收敛, 则它有界. 从而无界数列必发散.
</p>

<p class="proof">
	设 `x_n to a`.
	对 `epsi = 1 gt 0`, 由极限的定义知存在正整数 `N`, 使成立
	<span class="formula">
		`|x_n - a| lt epsi = 1`, `AA n gt N`.
	</span>
	这蕴含
	<span class="formula">
		`|x_n| = |(x_n-a) + a| lt 1+|a|`, `AA n gt N`.
	</span>
	从而数列有界.
</p>

<ol class="property">
	<b>收敛数列的保号性</b>
	设 `lim_(n to oo) x_n = a != 0`,
	则存在一个介于 `a` 和 `0` 之间的实数 `r`,
	<li>`a gt 0` 时, 对充分大的 `n` 成立 `x_n gt r gt 0`;</li>
	<li>`a lt 0` 时, 对充分大的 `n` 成立 `x_n lt r lt 0`.</li>
	从而当数列有一个不等于零的极限时, 对充分大的 `n`, `x_n` 与 `0`
	保持一个正的距离.
</ol>

<p class="proof">
	只证结论 1, 结论 2 证明类似.
	取 `epsi = a/2 gt 0`, 由极限定义, 对充分大的 `n` 有
	`a - a/2 lt x_n lt a + a/2`, 从而 `x_n gt a/2 gt 0`.
	取 `r = a/2` 即可.
</p>

<p class="property">
	<b>数列极限的保序性</b>
	如果 `{x_n}`, `{y_n}` 收敛, 且对充分大的 `n` 有 `x_n le y_n`, 则
	<span class="formula">
		`lim_(n to oo) x_n le lim_(n to oo) y_n`.
	</span>
	注意, 由 `x_n lt y_n` 不能推出 `lim_(n to oo) x_n lt lim_(n to oo)
	y_n`. 比如 `1/n lt 2/n`, 但两数列都趋于 `0`.
</p>

<p class="proof">
	设对 `AA n gt N_1` 成立 `x_n le y_n`.
	记 `lim_(n to oo) x_n = a`, `lim_(n to oo) y_n = b`.
	反设 `a gt b`. 取 `epsi = (a-b)//2 gt 0`.
	由极限定义, 存在正整数 `N_2, N_3` 使成立
	<span class="formula">
		`a - epsi lt x_n lt a + epsi`, `AA n gt N_2`,<br/>
		`b - epsi lt y lt b + epsi`, `AA n gt N_3`.
	</span>
	从而 `n gt max{N_1, N_2, N_3}` 时,
	<span class="formula">
		`(a+b)//2 = a - epsi lt x_n le y_n lt b + epsi = (a+b)//2`,
	</span>
	矛盾. 因此 `a le b`.
</p>

<p class="definition">
	如果 `x_n le x_(n+1)`, `n = 1, 2, cdots`, 则称 `{x_n}`
	<b>单调递增</b>, 如果 `x_n lt x_(n+1)`, `n = 1, 2, cdots`, 则称
	`{x_n}` <b>严格单调递增</b>.
	类似可以定义单调递减数列和严格单调递减数列.
</p>

<p class="definition">
	设 `{x_n}` 是一序列, `{n_k}` 是一个严格单调递增的正整数列,
	则 `{x_(n_k)} := {x_(n_k)}_(k=0)^oo` 称为 `{x_n}`
	的一个<b>子 (序) 列</b>, 特别 `{x_n}` 为数列时, `{x_(n_k)}` 称为
	`{x_n}` 的一个<b>子数列</b>.
	直观地看, 子列就是把原序列的一部分取出, 按原先的次序排成的一个序列.
</p>

<p class="corollary">
	若 `{n_k}` 是一个严格单调递增的正整数列, 则 `n_k ge k`, `k in ZZ^+`.
</p>

<p class="proof">
	归纳法容易证明.
</p>

<p class="property">
	<b>收敛数列子列的收敛性</b> 设 `lim_(n to oo) x_n = a`,
	则 `{x_n}` 的任意子列也收敛到 `a`.
</p>

<p class="proof">
	由极限定义, `AA epsi gt 0`, 存在正整数 `N`, 使得
	<span class="formula">
		`|x_n - a| lt epsi`, `AA n gt N`.
	</span>
	任取子列 `{x_(n_k)}`, 由 `n_k ge k`, `k in ZZ^+` 知,
	<span class="formula">
		`|x_(n_k) - a| lt epsi`, `AA k gt N`.
	</span>
</p>

<p class="corollary">
  若 `{x_n}` 是有限个子数列的无交并, 且这些子数列收敛到同一极限,
  则 `{x_n}` 收敛; 常见的情形是它的奇数项与偶数项分别收敛到同一极限.
</p>

<p class="theorem">
	<b>数列极限的四则运算</b>
	若 `lim_(n to oo) x_n = a`, `lim_(n to oo) y_n = b`, 则
	<span class="formula">
		`lim_(n to oo) (x_n +- y_n) = a +- b`;
		`quad lim_(n to oo) (x_n y_n) = ab`;
		`quad lim_(n to oo) (x_n)/(y_n) = a/b` (当 `b != 0`).
	</span>
	定理告诉我们, 极限运算与 (有限次的) 四则运算可以交换次序.
</p>

<ol class="proof">
	<li>`AA epsilon gt 0`, 由极限定义,  存在正整数 `N_1, N_2` 使成立
		<span class="formula">
			`|x_n - a| lt epsilon/2, AA n gt N_1`;</br>
			`|y_n - b| lt epsilon/2, AA n gt N_2`.
		</span>
		故 `n gt max{N_1, N_2}` 时,
		<span class="formula">
			`|(x_n +- y_n) - (a +- b)|`
			`le |x_n - a| + |y_n - b|`
			`lt epsi/2 + epsi/2 = epsi`.
		</span>
	</li>
	<li>由收敛数列的有界性知 `EE M gt 0`, 使
		<span class="formula">
			`|y_n| le M`, `AA n in NN`.
		</span>
		`AA epsilon gt 0`, 由极限定义, 存在正整数 `N_1, N_2` 使成立
		<span class="formula">
			`|x_n - a| lt epsi/(2M)`, `AA n gt N_1`;</br>
			`|y_n - b| lt epsi/(2(|a| + 1))`, `AA n gt N_2`.
		</span>
		(这样就避免了对 `a = 0` 的讨论). 因此 `n gt max{N_1, N_2}` 时,
		<span class="formula">
			`|x_n y_n - a b|`
			`= |x_n y_n - a y_n + a y_n - a b|`
			`le |x_n - a| |y_n| + |a| |y_n - b|`
			`lt epsi/(2M) M + |a| epsi/(2|a|+1) lt epsi`.
		</span>
	</li>
	<li>注意 `lim_(n to oo) y_n = b != 0`, 由数列极限的保号性知存在正整数
		`N_1` 与 `m gt 0` 使
		<span class="formula">
			`|y_n| gt m`, `AA n gt N_1`.
		</span>
		`AA epsilon gt 0`, 由极限定义, 存在正整数 `N_2, N_3` 使
		<span class="formula">
			`|x_n - a| lt m epsilon/2`, `AA n gt N_2`;</br>
			`|y_n - b| lt (m|b|)/(|a|+1) epsilon/2`, `AA n gt N_3`.
		</span>
		当 `n gt max{N_1, N_2, N_3}` 时有
		<span class="formula">
			`|x_n/y_n - a/b|`
			`= |(b x_n - a y_n)/(b y_n)|`
			`= (|b x_n - a b + a b - a y_n|)/(|b| |y_n|)`
			`lt (|b| |x_n - a| + |a| |y_n - b|)/(m |b|)`
			`= 1/m|x_n-a| + |a|/(m|b|) |y_n - b|`
			`lt 1/m m epsi/2 + |a|/(m|b|) (m|b|)/(|a|+1) epsi/2`
			`lt epsi`.
		</span>
	</li>
</ol>

<p class="corollary">
	设 `lim x_n = a`, `AA c in RR`, 令 `y_n = c` 是一个常数列, 则
	<span class="formula">
		`lim_(n to oo) (c x_n) = c a`, `quad lim_(n to oo) (c + x_n) = c +
		a`.
	</span>
</p>

<h2>实数的完备性</h2>

<h3>预备知识</h3>

<p class="definition">
  <b>有序域</b>
  设域 `bbb F` 上定义了一个全序 `le`, 且
  <span class="formula">
    `AA c in bbb F`, `quad a gt b rArr a + c gt b + c`,<br>
    `AA c gt 0`, `quad a gt b rArr a c gt b c`.
  </span>
  则称 `bbb F` 是有序域.
</p>

<ol class="corollary">
  在有序域中,
  <li>`x, y gt 0 rArr x + y gt 0`.</li>
  <li>`x y gt 0` `iff (x gt 0 and y gt 0)` `or (x lt 0 and y lt 0)`.</li>
  <li>`x gt 0 rArr -x lt 0 and x^-1 gt 0`.</li>
  <li>
    `x^2 ge 0`, 等号成立当且仅当 `x = 0`.  特别 `1 = 1^2 gt 0`.
  </li>
  <li>
    有序域的特征是零, 换言之若存在正整数 `n` 使得 `n x = 0`, 那么 `x = 0`.
  </li>
</ol>

<p class="proof">
  只证 4.
  因 `le` 是全序, 必有 `x gt 0`, `x = 0` 或 `x lt 0` 其一成立.
  `x gt 0` 时, 两边同乘 `x` 可知 `x^2 gt 0`. `x lt 0` 时, 两边同乘 `-x` 可知 `x^2 gt 0`.
  最后 `x = 0` 时显然 `x^2 = 0`.
</p>

<ol class="definition">
  <b>正锥</b>
  [来自 <a href="https://baike.baidu.com/item/%E5%AE%9E%E5%9F%9F/18919313" target="_blank">百度百科</a>]
  对于任意域 `bbb F`, 若它有真子集 `P` 满足以下条件, 则称它是域 `bbb F` 的正锥:
  <li>`P uu -P = bbb F`;</li>
  <li>`P + P sube P`;</li>
  <li>`P * P sube P`;</li>
  规定 `bbb F` 上的序 `x le y iff y - x in P`, 则可以验证 `bbb F` 关于 `le` 构成有序域,
  且 `P = { x in bbb F: x ge 0 }`.
</ol>

<p class="definition">
  <b>区间</b>
  设 `bbb F` 是有序域, `a, b in bbb F`, 定义
  <span class="formula">
    `[a, b] := { x in bbb F, a le x le b }`,<br>
    `(a, b) := { x in bbb F, a lt x lt b }`,<br>
    `[a, b) := { x in bbb F, a le x lt b }`,<br>
    `(a, b] := { x in bbb F, a lt x le b }`,
  </span>
  又引入形式记号 `-oo`, `+oo`, 定义
  <span class="formula">
    `(a, +oo) := { x in bbb F, a lt x }`.
  </span>
  类似定义 `[a, +oo)`, `(-oo, a)` 和 `(-oo, a]`.
</p>

<p class="definition">
  <b>阿基米德性质</b>
  设 `bbb F` 是有序域.
  若对 `bbb F` 中的任意 `a, b gt 0`, 都存在自然数 `n` 使得 `n a gt b`, 则称 `bbb F` 满足 Archimedes 性质.
  等价的描述是: 对任意 `x gt 0` 存在自然数 `n gt x`.
  可以验证有理数域 `QQ` 满足阿基米德性质.
</p>

<p class="corollary">
  阿基米德有序域中, 不存在无穷大 (最大正数) 与无穷小 (最小正数).
</p>

<p class="remark">
  在非标准分析中, 会专门研究含有无穷小的数域.
</p>

<ol class="definition">
  <b>稠密全序集</b>
  一个全序集 `(Q, le)`, 若满足
  <li>`Q` 不止一个元素;</li>
  <li>对任意 `x, y in Q`, 若 `x lt y`, 则存在 `z in Q` 使得 `x lt z lt y`;</li>
</ol>

<p class="corollary">
  若 `bbb F` 是阿基米德有序域, 则它是稠密全序集. 因此有理数域 `QQ` 是稠密全序集.
</p>

<div class="proof p">
  显然 `0, 1 in bbb F`, 因此它不止一个元素.<br>
  任取 `x, y in bbb F`, 且 `x lt y`.
  因为 `y - x gt 0`, 由阿基米德性质知道存在自然数 `n gt 1//(y-x)`,
  于是 `1//n lt y-x`, 取 `z = x + 1//n` 即满足 `x lt z lt y`.
  <hr>
  一般不能直接构造 `z = (x+y)//2`, 因为我们尚不了解是否有 `2=0`.
</div>

<h3>实数集的第一种构造——Dedekind 分割</h3>

<p>[来自群友 幂零群] [参考 <a href="https://zhuanlan.zhihu.com/p/570231887" target="_blank">周树人v吃鱼@知乎</a>]</p>

<ol class="definition">
  <b>Dedekind 分割</b>
  设 `Q` 是稠密全序集, 称 `Q` 的非空真子集 `alpha` 是一个<b>分割 (cut)</b>, 如果满足
  <li>`alpha` 是 `Q` 的前段: 若 `x in alpha`, `y lt x`, 则 `y in alpha`.</li>
  <li>`alpha` 中没有最大元.</li>
  `Q` 的全体分割 `alpha` 组成的集合称为 `Q` 的序完备化, 记为 `D(Q)`.
  特别取 `Q = QQ`, 定义 `RR := D(QQ)`, 就完成了实数集的构造.
</ol>

<ol class="corollary">
  <li>任意 `x in Q`, `alpha := {y in Q: y lt x}` 就是一个分割.</li>
  <li>若 `x in alpha`, `y in Q - alpha`, 则 `x lt y`.</li>
  <li>`(D(Q), sube)` 构成全序.</li>
  <li>若 `Q` 没有最大元或最小元, 则存在 `Q` 到 `D(Q)` 的保序嵌入 (保序单射).</li>
  <li>`D(Q)` 也是稠密全序集, 且满足确界原理.</li>
  <li>`D(D(Q))` 与 `D(Q)` 保序同构.</li>
</ol>

<h3>实数集的第二种构造——Cauchy 列</h3>

<p class="definition">
  考虑 `QQ` 上全体 Cauchy 列 (参见 Cauchy 收敛准则) 的集合 `S`.
  Cauchy 列之间定义等价关系 `~`:
  <span class="formula">
    `{x_n} ~ {y_n}`
    `iff AA epsi gt 0, EE N in NN, AA n gt N, |x_n - y_n| lt epsi`.
  </span>
  Cauchy 列之间的加法与乘法定义为
  <span class="formula">
    `{x_n} + {y_n} = {x_n + y_n}`,
    `quad {x_n} * {y_n} = {x_n * y_n}`.
  </span>
  则实数集可以定义为 `RR := S // ~`.
</p>

<h3>几个等价定理*</h3>

<p>以下几个定理互相等价, 它们给出实数完备性的等价刻画.</p>

<div class="img lg">
  <img src="../img/real-completeness.svg" alt="实数的完备性">
</div>

<p class="axiom">
  <b>Dedekind 分割</b>
  设 `X, Y` 是 `RR` 的两个非空子集, 满足:
  <span class="formula">
    `AA x in X`, `AA y in Y`, `x le y`,
  </span>
  那么存在 `a in RR`, 使得
  <span class="formula">
    `AA x in X`, `AA y in Y`, `x le a le y`.
  </span>
  特别当 `X nn Y = O/`, `X uu Y = RR` 时, 称 `(X, Y)` 是 `RR` 的一个 Dedekind 分割.
  这时上述的 `a` 是唯一的.
</p>

<p class="proof">
  我们证明 `a` 的唯一性. 假如还有一个 `b in RR` 满足 `AA x in X`, `AA y in Y`, `x le b le y`.
  如果 `b != a`, 不妨设 `a lt b`, 则取 `c = (a+b)//2`, 它满足 `AA x in X`, `AA y in Y`,
  <span class="formula">
    `x le a lt c lt b le y`.
  </span>
  于是 `c !in X`, `c !in Y`, 这与 `X uu Y = RR` 矛盾.
</p>

<ol class="theorem">
  <b>确界原理</b>
  <li>有上界的非空实数集必有上确界;</li>
  <li>有下界的非空实数集必有下确界.</li>
</ol>

<p class="proof">
  只证 1. 设 `X` 是有上界的非空实数集, 记 `X` 的全体上界为 `Y`. 由 Dedekind 分割
  知道, 存在 `a in RR` 使得 `AA x in X`, `AA y in Y`, `x le a le y`.
  这个 `a` 就是 `X` 的上确界, 因为首先 `AA x in X`, `x le a`, 说明它是上界.
  其次我们证明对任意 `epsi gt 0`, 都存在 `x_epsi in X` 使得 `x_epsi gt a - epsi`.
  否则存在 `epsi_0 gt 0`, 对任意 `x in X` 都有 `x le a - epsi_0`, 这说明
  `a - epsi_0` 也是 `X` 的一个上界, 故 `a - epsi_0 in Y`.
  但 `AA y in Y` 都有 `a le y`, 所以 `a le a - epsi_0`, 引出矛盾.
</p>

<ol class="theorem">
  <b>单调有界原理</b>
  <li>单调递增且有上界的数列有极限;</li>
  <li>单调递减且有下界的数列亦有极限.</li>
</ol>

<p class="proof">
  我们运用确界原理对 1. 作出证明.
  设 `{x_n}` 单调递增且有上界. 由确界原理知道 `{x_n}` 作为集合有上确界 `x`.
  对任意 `epsi gt 0`, 由 `x` 是上确界知道: `EE N in ZZ^+`, 使得 `x_N gt x - epsi`.
  于是对任意 `n gt N` 有 `x_n ge x_N gt x - epsi`.
  另一方面由于 `x` 是上界, 有 `x_n le x`.
  综上有 `AA n gt N`, `|x_n - x| lt epsi`.
</p>

<ol class="theorem">
  <b>Cantor 闭区间套定理</b>
  设 `{I_n}` 是一列闭区间, 满足
  <li>每个闭区间都包含在前一个中: `I_(n+1) sube I_n`, `n = 1, 2, cdots`;</li>
  <li>闭区间的长度趋于零: `lim_(n to oo) |I_n| = 0`.</li>
  那么存在唯一的实数 `x`, 使得 `x in I_n`, `n = 1, 2, cdots`.
</ol>

<ol class="proof">
  我们用单调有界原理来证明闭区间套定理.  
  <li>
    记 `I_n = [a_n, b_n]`, 容易知道 `a_n` 构成一单调递增数列, 且有上界 (`b_n` 的每一项都是它的上界)
    因此 `{a_n}` 有极限, 记为 `a`. 同理 `b_n` 有极限 `b`.
  </li>
  <li>下证 `a = b`.
    在不等式 `a_n le b_n` 两边取极限知道 `a le b`. 综上有不等式 `a_n le a le b le b_n`.
    由条件 2. `|b - a| le |b_n - a_n| to 0`, 故 `a = b`.
  </li>
  <li>
    令 `x = a = b`, 下证 `x` 就是满足条件的唯一实数.
    事实上若有实数 `y` 满足 `a_n le y le b_n`, `n = 1, 2, cdots`,
    则 `|x - y| le |b_n - a_n| to 0`, 这推出 `x = y`.
  </li>
</ol>

<p class="theorem">
  <b>Bolzano-Weierstrass 列紧性 (致密性) 原理, 又名聚点定理</b>
  有界数列必存在收敛子数列.
</p>

<ol class="proof">
  我们用闭区间套定理证明列紧性原理.
  设 `{x_n}` 有界, 下界为 `a_1`, 上界为 `b_1`.
  <li>
    取 `[a_1, b_1]` 的中点 `c`. 则 `[a_1, c]` 和 `[c, b_1]`
    两个区间至少有一个含有 `{x_n}` 中的无穷多项, 这个新区间记为 `[a_2, b_2]`.
  </li>
  <li>对新区间重复上述操作, 得到一系列的闭区间 `[a_1, b_1], [a_2, b_2], cdots`.
    每个区间都包含在前一个区间内, 且区间的长度趋于零, 由闭区间套定理, 存在唯一的实数 `x` 含于所有这些区间.
  </li>
  <li>下面选出 `{x_n}` 的一个子列, 使其收敛于 `x`.
    由于每个区间 `[a_n, b_n]` 都含有 `{x_n}` 中的无穷多项,
    我们可以先从 `[a_1, b_1]` 中选出一个 `x_(n_1)`,
    再从 `[a_2, b_2]` 中选出一个 `x_(n_2)`, 使得 `n_2 gt n_1`. 这是可以做到的,
    因为下标不大于 `n_1` 的项只有有限个, 而 `[a_2, b_2]` 中含有数列的无穷多项,
    其中下标大于 `n_1` 的仍有无穷多项. 如此重复操作就得到子列 `{x_(n_k)}`, 满足
    `x_(n_k) in [a_k, b_k]`.
  </li>
  <li>由闭区间套定理知道, `a_k to x`, `b_k to x`, 因此两边夹得到 `x_(n_k) to x`.</li>
  <hr>
  [群友 无懈可击99] 上述选出子列的过程中, 可以不用选择公理, 每次选择都可以是典范的.
</ol>

<p class="theorem">
  <b>Cauchy 收敛准则</b>
  如果数列 `{x_n}` 满足对任意 `epsi gt 0`, 存在正整数 `N`, 使得
  <span class="formula">
    `|x_m - x_n| lt epsi`, `quad AA m, n gt N`.
  </span>
  就称该数列为 <b>Cauchy 列</b>.
  Cauchy 收敛准则是说:
  <span class="formula">
    `{x_n}` 是 Cauchy 列 `iff {x_n}` 收敛.
  </span>
  任意 Cauchy 列均收敛的域称为完备域. Cauchy 收敛准则表明实数域是一个完备域.
</p>

<ol class="proof">
  <li>`lArr`: 收敛数列总是 Cauchy 列, 这一点与实数的完备性无关. 对任意 `epsi gt 0`, 由 `{x_n}` 收敛, 存在实数 `x` 和 `N in ZZ^+`, 使得
    <span class="formula">
      `|x_n - x| lt epsi // 2`,
      `quad |x_m - x| lt epsi // 2`,
      `quad AA m, n gt N`.
    </span>
    于是 `|x_m - x_n|` `lt |x_m - x| + |x - x_n|` `lt epsi`.
  </li>
  <li>`rArr`: 我们用列紧性原理证明 Cauchy 收敛准则.
    设 `{x_n}` 是 Cauchy 列, 取 `epsi = 1`, 则存在正整数 `N`, 使得
    <span class="formula">
      `|x_n - x_(N+1)| lt 1`, `quad AA n gt N`.
    </span> 
    这说明数列有界. 由列紧性原理, 有一子列 `{x_(n_k)}` 收敛于 `x`.  下证 `{x_n}` 也收敛于 `x`.
    <br>
    对任意 `epsi gt 0`, 由 `{x_(n_k)}` 收敛于 `x` 知道, 存在正整数 `N_1` 使得
    <span class="formula">
      `|x_(n_k) - x| lt epsi // 2`, `quad AA k gt N_1`.
    </span>
    又 `{x_n}` 是 Cauchy 列, 存在正整数 `N_2` 使得
    <span class="formula">
      `|x_n - x_m| lt epsi // 2`, `quad AA m, n gt N_2`.
    </span>
    取 `N ge max{N_1, N_2}`, 则 `n gt N`, `k gt N` 时, 有 `n_k ge k gt N ge N_2`, 于是
    <span class="formula">
      `|x_n - x|`
      `le |x_n - x_(n_k)| + |x_(n_k) - x|`
      `lt epsi`.
    </span>
  </li>
</ol>

<ol class="theorem">
  <b>有限覆盖定理</b>
  <li><b>一族开区间</b> 是指一个集合 `cc U = {U_alpha: alpha in A}`,
    其中每个元素 `U_alpha` 都是开区间. `A` 称为指标集.
  </li>
  <li><b>开覆盖</b>
    如果这些开区间的并集包含了点集 `E`, 就称 `cc U` 是 `E` 的一个<b>开覆盖</b>:
    <span class="formula">
      `E sube uuu_(alpha in A) U_alpha`.
    </span>
  </li>
  <li><b>有限子覆盖</b>
    如果这些开区间中的<b>有限个</b>已经构成 `E` 的开覆盖:
    <span class="formula">
      `E sube uuu_(i=1)^n U_i`,
    </span>
    就称 `{U_i}_(i=1)^n` 是一个<b>有限子覆盖</b>.
  </li>
  <li>
    <b>紧性</b>
    如果点集 `E` 的任意开覆盖都存在有限子覆盖, 则称 `E` 是紧的, `E` 是一个<b>紧集</b>.
  </li>
  有限覆盖定理是说: 设 `E sube RR`, 则
  <span class="formula">
    `E` 是紧集 `iff E` 是有界闭集.
  </span>
</ol>

<ol class="proof">
  我们用闭区间套定理简要证明: 闭区间是紧的.
  设 `I = [a_1, b_1]` 是闭区间, `cc U` 是它的一个开覆盖.
  反设 `I` 不能被 `cc U` 的任一有限子集覆盖, 操作如下:
  <li>取 `[a_1, b_1]` 的中点 `c`, 则 `[a_1, c]` 和 `[c, b_1]`
    两个区间至少有一个不能被 `cc U` 有限覆盖, 记为 `[a_2, b_2]`.
  </li>
  <li>对新区间重复上述操作, 得到一组闭区间套 `[a_1, b_1], [a_2, b_2], cdots`.
    由闭区间套定理, 存在唯一的实数 `x` 含于所有这些区间.
  </li>
  <li>
    对于这一个点 `x`, 存在开区间 `U_x in cc U`, 使得 `x in U_x`.
    但 `U_x` 具有固定的直径, 因而必存在 `n` 使得 `[a_n, b_n] sube U_x`, 即
    `[a_n, b_n]` 被 `cc U` 有限覆盖. 这引起矛盾.
  </li>
</ol>

<p>最后, 为了闭环, 用有限覆盖定理证明 Dedekind 分割:</p>

<ol class="proof enum">
  <li>
    假设 Dedekind 分割定理不成立, 那么应该存在 `RR` 的非空子集 `X, Y`, 满足:
    <ol>
      <li>`X nn Y = O/`, `X uu Y = RR`;</li>
      <li>`AA x in X`, `AA y in Y`, `x le y`.</li>
      <li>不存在 `a in RR` 使得 `AA x in X`, `AA y in Y`, `x le a le y`.
        换言之对于 `Y` 的任意下界 `a`, 至少存在一个 `x in X`, 使得 `x gt a`.
      </li>
    </ol>
  </li>
  <li>
    现在任取 `x_0 lt x_1 in X`, `y_1 lt y_0 in Y`.
    考虑闭区间 `[x_1, y_1]` 及其开覆盖 
    <span class="formula">
      `cc U := { (x_0, x): x in X nn (x_1, y_1) } uu { (y, y_0): y in Y nn (x_1, y_1) }`.
    </span>
    任取 `t in [x_1, y_1]`, 若 `t in X`, 则 `t` 是 `Y` 的一个下界.
    由 1. 的 (3) 知道, 存在一个 `t_0 in X` 使得 `t_0 gt t`, 于是 `t in (x_0, t_0)`.
    若 `t in Y` 也可以同样论证, `cc U` 确实已经盖住了区间 `[x_1, y_1]`.
  </li>
  <li>
    由有限覆盖定理知道, `cc U` 存在有限子覆盖
    <span class="formula">
      `cc F := { (x_0, x_i) }_(i=2)^m uu { (y_j, y_0) }_(j=2)^n`.
    </span>
    不妨设 `x_m = max_(2 le i le m) x_i`, `y_n = min_(2 le i le n) y_j`,
    用 1. 的 (3) 可以证明 `x_m lt y_n`,
    因此这个有限子覆盖并没有把区间 `[x_1, y_1]` 盖住, 从而矛盾.
  </li>
</ol>

<p>以及, 用 Cauchy 收敛准则证明单调有界原理:</p>

<p class="proof">
  设 `{x_n}` 单调递增, 有上界 `M`. 为证明 `{x_n}` 有极限, 只需说明它是 Cauchy 列:
  对任意 `epsi gt 0`, 把区间 `[x_0, M]` 平均分成 `s` 份, 使得每份的长度小于 `epsi`.
  由于这些区间只有有限个, 而数列有无穷多项, 故至少存在一个小区间 `I`, 其中含有数列的无穷多项.
  记 `I` 中的项的最小下标为 `N`, 下证 `AA n gt N`, `x_n in I`.
  反设存在 `k gt N`, `x_k !in I`. 因为 `k gt N`, 由数列的单调性知道 `x_k ge
  x_N`, 于是 `x_k` 只能位于 `I` 后面的某一区间内. 但这样一来 `x_k` 之后的所有项都不在区间 `I` 内,
  而 `x_k` 之前只有有限项, 这与 `I` 中含有数列的无穷多项矛盾.
</p>

<h2>求极限的实用定理</h2>

<h3>压缩映像</h3>

<ol class="lemma">
  设 `0 lt r lt 1`, 且对任意非负整数 `n`, 数列 `{x_n}` 满足:
  <li>`|x_(n+1)-a| le r |x_n-a|`, 则 `lim_(n to oo) x_n = a`.</li>
  <li>`|x_(n+2) - x_(n+1)| le r |x_(n+1) - x_n|`, 则 `{x_n}` 收敛.</li>
</ol>

<ol class="proof">
  <li>
    归纳法容易证明
    <span class="formula">
      `|x_n - a| le r^n|x_0 - a|`,
    </span>
    `r^n` 是无穷小, `|x_0 - a|` 是有界量, 因此 `|x_n - a|` 为无穷小,
    即 `lim_(n to oo) x_n = a`.
  </li>
  <li>
    应用 Cauchy 收敛准则. 对任意 `epsi gt 0`, 取充分大的 `N` 使得 `|x_1 - x_0| r^N//(1-r) le epsi`,
    于是对任意 `m ge n ge N` 有
    <span class="formula align">
      `|x_(m+1) - x_n|`<br>
      `le sum_(k=0)^(m-n) |x_(n+k+1) - x_(n+k)|`<br>
      `le sum_(k=0)^(m-n) r^(n+k) |x_1 - x_0|`<br>
      `le |x_1 - x_0| r^n sum_(k ge 0) r^k`<br>
      `= |x_1 - x_0| r^n // (1-r)`<br>
      `le epsi`.
    </span>
  </li>
</ol>

<ol class="theorem">
  <b>Banach 压缩映像原理</b>
  设 `I` 是闭区间, `f: I to I` 是<b>压缩映射</b>, 即存在实数 `0 lt r lt 1`, 对任意 `x, y in I` 有
  <span class="formula">
    `|f(x) - f(y)| le r |x - y|`.
  </span>
  则
  <li>`f` 在 `I` 上存在唯一<b>不动点</b>, 即存在唯一实数 `a in I` 使 `f(a) = a`.</li>
  <li>对任意 `x in I`, 记 `f^n(x) = underbrace(f...f)_n(x)`, 则 `lim_(n to oo) f^n(x) = a`.</li>
  <li>若 `f` 是 `g: I to I` 的迭代, 即存在正整数 `k` 使得 `f = g^k`, 则 `a` 也是 `g` 的唯一不动点.</li>
</ol>

<ol class="proof">
  <li>
    存在性.
    任取 `x_0 in I`, 令 `x_(n+1) := f(x_n)`, 则对任意非负整数 `n`,
    <span class="formula">
      `|x_(n+2) - x_(n+1)|`
      `= |f(x_(n+1)) - f(x_n)|`
      `le r |x_(n+1) - x_n|`.
    </span>
    由引理的 2. 知 `{x_n}` 收敛, 设极限为 `a`.  由不等式
    <span class="formula">
      `|x_(n+1) - f(a)|`
      `= |f(x_n) - f(a)|`
      `le r|x_n - a|`
    </span>
    知道, `x_n to f(a)`. 但数列极限唯一, 故 `f(a) = a`.
    <br>
    唯一性. 若存在 `b in I` 使 `f(b) = b`, 则
    <span class="formula">
      `|x_(n+1) - b|`
      `= |f(x_n) - f(b)|`
      `le r |x_n - b|`,
    </span>
    由引理的 1. 知 `x_n to b`, 但数列极限唯一, 故 `a = b`.
  </li>
  <li>由 1. 的证明知道 `x_n = f^n(x_0)`, 但 `x_0` 是任意选取的, 即得证.</li>
  <li>由函数复合运算的结合律知道 `g(f^n(a)) = f^n(g(a))`,
    两边令 `n to oo`,
    由于 `a` 是 `f` 的不动点, 左边等于 `g(a)`;
    又由 2. 知右边的极限等于 `a`, 故 `g(a) = a`.
    又 `g` 的不动点都是 `f` 的不动点, 所以 `a` 是 `g` 的唯一不动点.
  </li>
</ol>

<p class="remark">
  压缩映像原理可以推广到完备度量空间. 我们依然可以使用 Cauchy 收敛准则.
</p>

<ol class="example">
  [群友 我是懒羊羊的数学题]
  设 `x_1 = sqrt 6`, `x_(n+1) = sqrt(6+x_n)`. 求
  `lim_(n to oo) x_n` 和 `lim_(n to oo) (x_n - 3) 6^n`.
</ol>

<ol class="solution">
  <li>解方程 `x = sqrt(6+x)` 得到唯一不动点 `x = 3`.
    归纳法容易得到通项的范围 `0 lt x_n lt 3`.
    现考虑通项与不动点的差:
    <span class="formula">
      `|x_(n+1) - 3|`
      `= |sqrt(6+x_n) - 3|`
      `= |(x_n - 3)/(sqrt(6+x_n) + 3)|`
      `le 1/(sqrt 6 + 3) |x_n - 3|`.
    </span>
    由引理知 `x_n to 3`.
  </li>
  <li>
    这是一个复杂的问题, 涉及到复动力系统的相关知识,
    完整解法参见 [<a href="https://math.stackexchange.com/questions/4097866/let-a-1-sqrt6-a-n1-sqrt6a-n-find-lim-limits-n-to-infty-a-n-3" target="_blank">stack exchange</a>].
    在这里我们只证明极限存在.  类似 1. 有
    <span class="formula">
      `(x_(n+1) - 3) 6^(n+1)`
      `= 6/(sqrt(6+x_n) + 3) (x_n - 3) 6^n`.
    </span>
    问题化为证明无穷乘积 `prod_(n ge 1) 6/(sqrt(6+x_n)+3)` 收敛, 即证级数
    <span class="formula">
      `sum_(n ge 1) ln(6/(sqrt(6+x_n)+3))`
    </span>
    收敛.  事实上由 1. 得 `x_n - 3 = O(3^-n)`, 于是
    <span class="formula">
      `ln(6/(sqrt(6+x_n)+3))`
      `= ln(1 + (3 - sqrt(6+x_n))/(sqrt(6+x_n)+3))`
      `= ln(1 + (3 - sqrt(6+x_n))^2/(3 - x_n))`
      `= ln(1 + (3 - x_(n+1))^2/(3 - x_n))`
      `= ln(1 + (O(3^(-2n-2)))/(O(3^-n)))`
      `= ln(1 + O(3^-n))`
      `= O(3^-n)`.
    </span>
  </li>
  <hr>
  注: 如果把题目的 6 改成 2, 则可以找到 `x_(n+1)^2 = x_n + 2` 的解
  `x_n = 2cos(pi//2^(n+1))`, 所求极限为 `pi^2//4`.
</ol>

<p class="example">
	设 `x_1 = 1`, `x_n = 1/m [(m-1) x_(n-1) + A/x_(n-1)^(m-1)]`,
	其中 `m` 是非零整数, `A gt 0`.
	证明 `{x_n}` 收敛, 且极限为 `root m A`.
</p>

<h3>Cesàro 定理</h3>

<ol class="theorem">
	<b>Cesàro 定理</b> 设 `lim_(n to oo) a_n = a`, 则
	<li>`lim_(n to oo) 1/n sum_(k=1)^n a_k = a`;</li>
	<li>若 `a_n gt 0`, `a gt 0`, 由 1. 取对数得到 `lim_(n to oo) root n (prod_(k=1)^n a_k) = a`;</li>
</ol>

<div class="p proof">
  记 `S_n = sum_(k=1)^n a_k`. 对任意 `epsi gt 0`,
  取 `N` 充分大使得任意 `n gt N` 有 `|a_n - a| lt epsi`, 于是
  <span class="formula">
    `|S_n/n - a|`
    `= |(S_N - N a)/n + (a_(N+1)-a)/n + cdots + (a_n - a)/n|`
    `le |(S_N - N a)/n| + epsi`.
  </span>
  令 `n to oo`, 由于 `N` 是固定的, 得到 `|S_n/n - a| le epsi`.<br>
  或者说, 对于给定的 `N`, 再取 `M` 使得 `n gt M` 时 `|(S_N - N a)/n| lt epsi`,
  这样上式总的来说就小于 `2 epsi`.
  <hr>
  我们把和式 `sum_(k=1)^n` 分成 `sum_(k=1)^N` 和 `sum_(k=N+1)^n` 两部分, 再分别证明它们小于 `epsi`.
  这一证明技巧将贯穿本节的内容.
</div>

<p class="example">
  [史济怀《数学分析》]
  设 `x_n to x, y_n to y`, 证明 `1/n (x_1 y_n + cdots + x_n y_1) to x y`.
</p>

<ol class="proof">
  <li>
    先设 `y = 0`.
    利用 Cauchy 不等式, 原式的平方 `le 1/n^2 (sum_(k=1)^n x_k^2) (sum_(k=1)^n y_k^2)`.
    而 `x_n^2, y_n^2` 的极限分别是 `x^2` 和 `y^2`, 利用 Cesàro 定理知不等式右端趋于 `x^2 y^2 = 0`,
    因此原式的平方趋于 0, 从而原式的极限是 0.
    <br>
    或者, 也可以设 `|x_n|` 的上界是 `X`, 应用 Cesàro 定理得
    <span class="formula">
      `1/n |x_1 y_n + cdots + x_n y_1|`
      `le X/n sum_(k=1)^n |y_k|`
      `= X |y| = 0`,
    </span>
    从而原式极限为 0.
  </li>
  <li>
    一般情形, 考虑以 0 为极限的数列 `{y_n - y}`, 由 1. 的结论有
    <span class="formula">
      `1/n (x_1 (y_n - y) + cdots + x_n (y_1 - y)) to 0`,
    </span>
    于是再次应用 Cesàro 定理有:
    <span class="formula">
      `lim_(n to oo) 1/n (x_1 y_n + cdots + x_n y_1)`
      `= lim_(n to oo) 1/n (x_1 y + cdots + x_n y)`
      `= x y`.
    </span>
  </li>
</ol>

<h3>Stolz 定理</h3>

<ol class="theorem">
  <b>Stolz 定理</b>
  对于数列 `A_n, B_n`, 考虑两种情形:
  <li>`A_n` 单调递增趋于 `+oo`;</li>
  <li>`A_n` 单调递减趋于零, `B_n to 0`.</li>
  若条件 1, 2 其中之一成立, 且下式右端极限存在, 则左端极限也存在且等号成立:
  <span class="formula">
    `lim_(n to oo) B_n/A_n = lim_(n to oo) (B_n - B_(n-1))/(A_n - A_(n-1)) = L`.
  </span>
  Stolz 定理可以看作离散版本的洛必达法则.
  两种情形分别称为 `ast//oo` 型和 `0//0` 型极限.
</ol>

<ol class="proof">
  <li>
    补充定义 `A_0 = B_0 = 0`,
    记 `a_n = A_n - A_(n-1)`, `b_n = B_n - B_(n-1)`,
    于是 `A_n = sum_(k=1)^n a_n`, `B_n = sum_(k=1)^n b_n`.
    只需证:
    <span class="formula">
      `lim_(n to oo) (sum_(k=1)^n b_k)/(sum_(k=1)^n a_k) = lim_(n to oo) b_n/a_n = L`.
    </span>
    对任意 `epsi gt 0`, 取 `M` 使得
    <span class="formula">
      `|b_n/a_n - L| lt epsi`, `quad AA n gt M`.
    </span>
    因为 `A_n to +oo`, 再取 `N` 使得
    <span class="formula">
      `1/A_n sum_(k=1)^M |b_k - L a_k| lt epsi`, `quad AA n gt N`.
    </span>
    于是 `n gt max{N, M}` 时,
    <span class="formula">
      `|(sum_(k=1)^n b_k)/(sum_(k=1)^n a_k) - L|`
      `= |1/A_n sum_(k=1)^n (b_k - L a_k)|`
      `le 1/A_n sum_(k=1)^M |b_k - L a_k| + 1/A_n sum_(k=M+1)^n a_k |b_k/a_k - L|`
      `le 2 epsi`.
    </span>
  </li>
  <li>
    对任意 `epsi gt 0`, 取 `N` 使得
    <span class="formula">
      `|(B_(n-1) - B_n)/(A_(n-1) - A_n) - L| lt epsi`, `quad AA n gt N`.
    </span>
    注意 `A_n` 单调减, 上式写为
    <span class="formula">
      `(L - epsi) (A_(n-1) - A_n) lt B_(n-1) - B_n lt (L + epsi) (A_(n-1) - A_n)`.
    </span>
    取 `m gt n`, 从 `n+1` 到 `m` 求和得
    <span class="formula">
      `(L - epsi) (A_n - A_m) lt B_n - B_m lt (L + epsi) (A_n - A_m)`,
    </span>
    即 `|(B_n - B_m)/(A_n - A_m) - L| lt epsi`, 令 `m to oo` 即得结论.
  </li>
</ol>

<ol class="example">
  设 `a_0 gt 0`, `a_(n+1) = sin(a_n)`, 求证
  <li>`a_n to 0`, `n to oo`;</li>
  <li>`a_n ~ sqrt(3/n)`, `n to oo`.</li>
</ol>

<ol class="proof">
  <li>`n gt 0` 时 `{a_n}` 单调有界, 故数列收敛到 `x = sin x` 的唯一不动点
    `x = 0`;</li>
  <li>应用 stolz 定理和等价无穷小,
    <span class="formula">
      `lim_(n to oo) n/(1/a_n^2)`
      `= lim_(n to oo) (a_n^2 a_(n-1)^2)/(a_(n-1)^2 - a_n^2)`
      `= lim_(x to 0) (sin^2 x * x^2)/(x^2 - sin^2 x)`
      `= 3`.
    </span>
  </li>
</ol>

<p class="example">
  [来自群友 SmartPig] `a_0 in RR`, `a_(n+1) = cos(a_n)`, 证明数列收敛.
</p>

<p class="proof">
  [来自群友 玩家喵] 使用压缩映像原理,
  <span class="formula">
    `|a_(n+1) - a_n|`
    `= |cos(a_n) - cos(a_(n-1))|`
    `= |sin(xi)| |a_n - a_(n-1)|`,
  </span>
  其中 `xi` 位于 `a_n` 和 `a_(n-1)` 之间.
  `n gt 2` 时有 `xi le 1` 从而 `|a_(n+1) - a_n| le sin(1) |a_n - a_(n-1)|`.
</p>

<h3>Toeplitz 定理</h3>

<p class="example">
  [来自 我是乱序的不等式]
  若 `a_n to a`, 且正项级数 `sum b_n` 收敛到 `S`, 那么
  <span class="formula">
    `sum_(k=1)^n a_(n+1-k) b_k to a S`.
  </span>
</p>

<p class="proof">
  记 `b_n` 的前 `n` 项和为 `S_n`. 对任意 `epsi gt 0`,
  先取 `M` 使得
  <span class="formula">
    `|a_n - a| lt epsi`, `quad AA n gt M`,
  </span>
  再取 `N` 使得
  <span class="formula">
    `|S_n - S| lt epsi`, `quad b_n lt epsi/M`, `quad AA n gt N`.
  </span>
  于是 `n gt M + N + 1` 时, 记 `A` 为 `|a_n - a|` 的上界, 有
  <span class="formula align">
    `|sum_(k=1)^n a_(n+1-k) b_k - a S|`<br>
    `le |sum_(k=1)^n (a_(n+1-k) - a) b_k| + |a(S_n - S)|`<br>
    `le |sum_(k=1)^(n-M) (a_(n+1-k) -a) b_k| + |sum_(k=n-M+1)^n (a_(n+1-k)-a) b_k| + |a| epsi`<br>
    `le S epsi + M * A * epsi + |a| epsi`.
  </span>
</p>

<p class="example">
  设 `p_k gt 0`, `k = 1, 2, cdots`, `lim_(n to oo) a_n = a`, 且
  <span class="formula">
    `lim_(n to oo) p_n/(p_1 + p_2 + cdots + p_n) = 0`
  </span>
  证明:
  <span class="formula">
    `lim_(n to oo) (p_1 a_n + p_2 a_(n-1) + cdots + p_n a_1)/(p_1 +
    p_2 + cdots + p_n) = a`.
  </span>
</p>

<p class="proof">
  [来自群友 乐正垂星]
  记 `S_n = sum_(k=1)^n p_k`.  对任意 `epsi gt 0`,
  先取 `M` 使得
  <span class="formula">
    `|a_n - a| lt epsi`, `quad AA n gt M`.
  </span>
  再取 `N` 使得
  <span class="formula">
    `|p_n/S_n| lt epsi/M`, `quad AA n gt N`.
  </span>
  于是 `n gt M + N + 1` 时,
  <span class="formula">
    `|(sum_(k=1)^n p_k a_(n+1-k))/S_n - a|`
    `= |sum_(k=1)^n p_k/S_n (a_(n+1-k)-a)|`
    `le |sum_(k=1)^(n-M)| + |sum_(k=n-M+1)^n|`.
  </span>
  对上式第一项, 有
  <span class="formula">
    `sum_(k=1)^(n-M) |p_k/S_n| |a_(n+1-k)-a|`
    `le sum_(k=1)^(n-M) |p_k/S_n| epsi`
    `le epsi`.
  </span>
  对第二项, 记 `|a_n - a|` 的上界为 `A`, 有
  <span class="formula">
    `sum_(k=n-M+1)^n |p_k/S_n| |a_(n+1-k)-a|`
    `le sum_(k=n-M+1)^n |p_k/S_k| A`
    `le M * epsi/M * A = A epsi`.
  </span>
  故原式极限为 `a`.
</p>

<p>	这启示我们得到如下定理:</p>

<p class="theorem">
	<b>Toeplitz 定理</b>
	设对任意正整数 `n` 和任意正整数 `k le n` 有 `t_(n, k) ge 0` 和
	`sum_(k=1)^n t_(n,k) = 1`,
	且对每个固定有 `k` 有 `lim_(n to oo) t_(n, k) = 0`.
	若 `lim_(n to oo) a_n = a`, 则
	<span class="formula">
		`lim_(n to oo) sum_(k=1)^n t_(n,k) a_k = a`.
	</span>
</p>

<p class="proof">
	记 `b_n = a_n - a`, `n = 1, 2, cdots`, 只需证
	<span class="formula">
		`lim_(n to oo) sum_(k=1)^n t_(n,k) b_k = 0`.
	</span>
	因为 `b_n to 0`, 存在正整数 `N`, 对任意 `n gt N` 有 `|b_n| lt epsi/2`.
	由于对每个固定的 `k` 有 `lim_(n to oo) t_(n,k) = 0`,
	故存在正整数 `M`, 对任意 `n gt M` 有
	<span class="formula">
		`|sum_(k=1)^N t_(n,k) b_k| lt epsi/2`.
	</span>
	从而当 `n gt max{N, M}` 时
	<span class="formula">
		`|sum_(k=1)^n t_(n,k) b_k|`
		`= |sum_(k=1)^N t_(n,k) b_k| + |sum_(k=N+1)^n t_(n,k) b_k|`
		`lt epsi/2 + epsi/2`
		`= epsi`.
	</span>
</p>

<p class="example">
	已知 `lim_(n to oo) a_n = a`, `x_n = sum_(k=0)^n (n;k) a_k`, 求极限
	`lim_(n to oo) x_n/2^n`.
</p>

<p class="solution">
	取 `t_(n,k) = 1/2^n (n;k)`, 则 `sum_(k=1)^n t_(n,k) = 1`.
	另一方面, `(n;k)` 是 `n` 的 `k` 次多项式, 因此
	`lim_(n to oo) t_(n,k) = 0`. 由 Toeplitz 定理,
	`lim_(n to oo) x_n/2^n = a`.
</p>

<h2>从 `"e"` 到 `gamma`</h2>

<p class="lemma">
	`n ge 2` 时, `(1+1/n)^n lt sum_(k=0)^n 1/(k!) lt 3`.
</p>

<p class="proof">
	由二项式定理,
	<span class="formula">
		`	(1 + 1/n)^n
		=	1 + n * 1/n + (n(n-1))/(2!) * 1/n^2 + cdots + 1/n^n`
		`lt	sum_(k=0)^n 1/(k!)`
		`le	2 + sum_(k=2)^n 1/(k(k-1))`
		`=	2 + 1 - 1/n lt 3`.
	</span>
</p>

<p class="theorem" id="the-e">
	数列 `x_n = (1+1/n)^n` 有极限, 记为
	<span class="formula">
		`"e" = 2.718281828...`
	</span>
	我们已知 <a href="../number/0.html#the-e-irrational">`"e"` 是无理数</a>.
	这个常数有许多好的性质, 最重要的一点是, 函数 `"e"^x` 的导数是它自身.
	人们把 `"e"` 用于自然对数的底, 即 `ln x := log_"e" x`.
</p>

<p class="proof">
	由引理知数列有上界, 下证数列单调递增.  由均值不等式知
	<span class="formula">
		`  root(n+1)((1 + 1/n)^n)
		lt (n(1 + 1/n) + 1)/(n+1)
		=  1 + 1/(n+1)`.
	</span>
	所以 `(1 + 1/n)^n lt (1 + 1/(n+1))^(n+1)`.
	从而由单调有界原理知极限 `lim_(n to oo) x_n` 存在.
</p>

<p class="corollary">
	由极限的四则运算容易得到:
	<span class="formula">
		` lim_(n to oo) (1 + 1/n)^(n+1)
		= lim_(n to oo) (1 + 1/(n+1))^n = "e"`,<br/>
		` lim_(n to oo) (1 - 1/n)^n
		= lim_(n to oo) (1 - 1/n)^(n+1)
		= lim_(n to oo) (1 - 1/(n+1))^n = "e"^-1`.
	</span>
</p>

<p class="corollary" id="cor-e-2">
	对任意正整数 `n` 有
	<span class="formula">
		`(1 + 1/n)^n lt "e" lt (1 + 1/n)^(n+1)`,
	</span>
	或等价地,
	<span class="formula">
		`1/(n+1) lt ln(1 + 1/n) lt 1/n`,
	</span>
	即
	<span class="formula">
		`ln{:(n+1)/n:} lt 1/n lt ln{:n/(n-1):}`, `quad n ge 2`.
	</span>
</p>

<p class="proof">
	由<a class="ref" href="#the-e"></a>的证明知道,
	`(1+1/n)^n` 严格单调递增趋于 `"e"`, 因此得到不等式的前一半.
	为证后半部分, 由 `lim_(n to oo) (1 + 1/n)^(n+1) = "e"`,
	因此只需证明 `(1 + 1/n)^(n+1)` 严格单调递减.
	由均值不等式有:
	<span class="formula">
		`  root(n+2)(1/( (1 + 1/n)^(n+1) ))`
		`lt 1/(n+2)((n+1)/(1 + 1/n) + 1)`
		`=  (n+1)/(n+2)`.
	</span>
	所以
		`  (1 + 1/n)^(n+1)`
		`gt ((n+2)/(n+1))^(n+2)`
		`=  (1 + 1/(n+1))^(n+2)`.
</p>

<p class="proof">
	对函数 `ln x` 在区间 `[n, n+1]` 上应用微分中值定理,
	立即得到第二个不等式.
</p>

<p class="theorem" id="euler-constant">
	`H_n = sum_(k=1)^n 1/k` 称为第 `n` 个<b>调和数 (harmonic number)</b>.
	这个名字来自音乐中的泛音, 因为一段弦振动时, 其二分之一, 三分之一,
	四分之一... 也在相应振动.
	由<a class="ref" href="#cor-e-2"></a>的第三式求和得到
	<span class="formula">
		`ln(n+1) lt H_n lt ln n + 1`, `quad n ge 2`.
	</span>
	因为 `lim_(n to oo) ln(n+1) = +oo`,
	所以 <b>调和级数</b> `lim_(n to oo) H_n = +oo`.
	然而极限 `lim_(n to oo) H_n - ln n` 存在,
	称为<b>Euler-Mascheroni 常数</b>
	<span class="formula">
		`gamma = 0.5772156649015329...`
	</span>
	这个数究竟是有理数还是无理数, 目前尚未得到证明.
</p>

<p class="proof">
	对任意正整数 `n`, 记 `x_n = H_n - ln n`.
	一方面 `H_n gt ln(n+1) gt ln n`, 因此 `{x_n}` 有下界.
	另一方面
	<span class="formula">
		`x_(n+1) - x_n = 1/(n+1) - ln(1+1/n) lt 0`,
	</span>
	即 `{x_n}` 单调递减.
</p>

<p class="corollary">
	`H_n ~ ln n` (`n to oo`).
</p>

<p class="example">
  设 `x_n = H_(2n) - H_n`
  `= sum_(k=1)^n 1/(n+k)`
  `= sum_(k=1)^(2n) (-1)^(k-1)/k`,
  则 `lim x_n = ln 2`.
</p>

<p class="proof">
	<span class="formula">
		`lim_(n to oo) (H_(2n) - H_n)`
		`= lim_(n to oo) [(H_(2n) - ln 2n) - (H_n - ln n) + ln 2]`
		`= gamma - gamma + ln 2 = ln 2`.
	</span>
</p>

<p class="proof">
	利用 <a class="ref" href="#cor-e-2"></a> 得到
	<span class="formula">
		`ln{:(2n+1)/n:} lt sum_(k=1)^n 1/(n+k) lt ln{:(2n)/(n-1):}`,
	</span>
	两边夹即得结论.
</p>

<p class="proof">
	利用定积分定义,
	<span class="formula">
		`lim_(n to oo) sum_(k=1)^n 1/(n+k)`
		`= lim_(n to oo) 1/n sum_(k=1)^n 1/(1+k/n)`
		`= int_0^1 dx/(1+x)`
		`= ln 2`.
	</span>
</p>

<p class="remark" id="rem-cauchy">
	用 Cauchy 不等式可以得到
	<span class="formula">
		`(H_(2n)-H_n)^2 lt n sum_(k=1)^n 1/(n+k)^2`
		`lt n sum_(k=1)^n 1/((n+k)(n+k-1))`
		`= n (1/n - 1/(2n)) = 1/2`
	</span>
	和
	<span class="formula">
		`(H_(2n) - H_n) sum_(k=1)^n (n+k) ge n^2`.
	</span>
    从而 `2/3 le ln 2 = lim_(n to oo) (H_(2n) - H_n) le (sqrt 2)/2`.
    这个不等式写成小数就是 `0.667 le 0.693 le 0.707`,
    也是一个蛮不错的放缩.
</p>

<p class="example">
  本例给出 `n!` 的较粗糙的不等式估计.
  更精确的估计参见 <a href="8.html#8-1-5">Stirling 公式</a>.
  <span class="formula">
    `(n+1)^n "e"^-n lt n! lt (n+1)^(n+1) "e"^-n`,
    `quad n in ZZ^+`.
    <span class="label" id="for-n!-ineq"></span>
  </span>
  换言之
  <span class="formula">
    `(n-1)! "e"^(n-1) le n^n lt n! "e"^(n-1)`,
    `quad n in ZZ^+`.
    <span class="label" id="for-n^n-ineq"></span>
  </span>
</p>

<p class="proof">
  记 `a_n = ((n+1)/"e")^n`, `b_n = "e" ((n+1)/"e")^(n+1)`, 则
  <span class="formula">
    `a_n/a_(n-1)`
    `= n/"e" (1+1/n)^n`
    `lt n`,<br>
    `a_n lt n! * a_1 = n! * 2//"e" lt n!`;
  </span>
  同样
  <span class="formula">
    `b_n/b_(n-1)`
    `= n/"e" (1+1/n)^(n+1)`
    `gt n`,<br>
    `b_n gt n! * b_1 = n! * 4//"e" gt n!`.
  </span>
</p>

<p class="example">
  证明: `lim_(n to oo) n/(root n (n!)) = "e"`.
</p>

<p class="proof">
  利用不等式 <a class="ref" href="#for-n!-ineq"></a> 得
  <span class="formula">
    `1/(root n (n+1)) * n/(n+1) "e" lt n/(root n (n!)) lt n/(n+1) "e"`.
  </span>
  再由两边夹法则即得证.
</p>

<p class="proof">
  [来自 论文哥]
  第 2 问的又一证明.  用定积分定义,
  <span class="formula">
    `1 = int_0^1 ln{:1/x:} dx`
    `= lim_(n to oo) 1/n sum_(k=1)^n ln{:1/(k/n):}`
    `= lim_(n to oo) 1/n ln{:n^n/(n!):}`
    `= lim_(n to oo) ln {: n/(root n (n!)):}`.
  </span>
  两边取指数即可.
</p>

<p class="proof">
  第 2 问的又一证明. 取对数后, 利用 Stolz 定理,
  <span class="formula">
    `lim_(n to oo) (ln n - 1/n ln(n!))`
    `= lim_(n to oo) (n ln n - (n-1) ln (n-1) - ln n)`
    `= lim_(n to oo) (n-1) ln{:n/(n-1):}`
    `= lim_(n to oo) (ln(1+1/(n-1)))/(1/(n-1)) = 1`.
  </span>
  故原极限为 `"e"`.
</p>

<p class="example">
  `lim_(x to +oo) (sum_(n ge 1) (x/n)^n)^(1/x)`.
</p>

<p class="proof">
  记 `f(x) = sum_(n ge 1) (x/n)^n`,
  利用不等式 <a class="ref" href="#for-n^n-ineq"></a> 得
  <span class="formula">
    `f(x) le sum_(n ge 1) 1/(n-1)! x^n/"e"^(n-1)`
    `= x "e"^(x//"e")`,<br>
    `f(x) ge sum_(n ge 1) 1/n! x^n/"e"^(n-1)`
    `= "e"("e"^(x//"e") - 1)`.
  </span>
  `x to +oo` 时,
  <span class="formula">
    `(x "e"^(x//"e"))^(1/x)`
    `= x^(1/x) "e"^(1/"e")`
    `to "e"^(1/"e")`,
  </span>
  另一方面由洛必达法则,
  <span class="formula">
    `("e"("e"^(x/"e") - 1))^(1/x)`
    `= "e"^(1/x) exp[1/x ln ("e"^(x//"e") - 1)]`
    `~ exp[("e"^(x//"e") * (1//"e"))/("e"^(x//"e")-1)]`
    `~ "e"^(1/"e")`.
  </span>
  由两边夹法则即得结论.
</p>

<p class="example">
    `lim_(n to oo) n sin(2pi n! "e") = 2pi`.
</p>

<p class="proof">
  使用 `"e"` 的级数表示,
  <span class="formula">
    `n! "e"`
    `= n! (sum_(k=0)^n 1/(k!) + 1/((n+1)!) + o(1/((n+1)!)))`
    `= A + 1/(n+1) + o(1/(n+1))`.
  </span>
  其中 `A := n! sum_(k=0)^n 1/(k!)` 是整数. 我们有
  <span class="formula">
    `n sin(2pi n! "e")`
    `= n sin((2pi)/(n+1) + o(1/(n+1)))`
    `to 2 pi`.
  </span>
</p>

<p class="example">
  [周民强《实变函数》]
  <b>Dirichlet 函数表示为累次极限</b>
  <span class="formula">
    `lim_(n to oo) lim_(k to oo) (cos(2pi n! x))^(2k) = { 1, if x in QQ; 0, otherwise :}`
  </span>
</p>

<p class="proof">
  若 `x in QQ`, 则 `n` 充分大时, `n! x` 是整数, `cos(2pi n! x) = 1`, 此时不论 `k` 取何值,
  `(cos(2pi n!x))^(2k)` 总是等于 1.<br>
  若 `x !in QQ`, 则 `n! x` 永远不会是整数或整数的一半, 从而 `|cos(2pi n!x)| lt 1`,
  `lim_(k to oo) (cos(2pi n!x))^(2k) = 0`.
</p>

<p class="example">
  [<a href="https://kexue.fm/archives/3256" target="_blank">苏剑林. (2015, Mar 28). 有趣的求极限题：随心所欲的放缩</a>]
  <span class="formula">
    `lim_(n to oo) sum_(k=1)^n (k/n)^n = "e"/("e"-1)`.
  </span>
</p>

<p class="proof">
	只需证明
	<span class="formula">
		`lim_(n to oo) sum_(k=0)^(n-1) (1-k/n)^n = sum_(n=0)^oo "e"^-n`.
	</span>
	先由均值不等式 (`n gt k`)
	<span class="formula">
		`root(n+1)((1-k/n)^n) le (n-k+1)/(n+1) = 1-k/(n+1)`
	</span>
	知道, 数列 `{(1-k/n)^n}` 单调递增趋于 `"e"^-k`, 于是左边 `le` 右边.
	为证明左边 `ge` 右边, 同样由均值不等式 (`n gt k`)
	<span class="formula">
		`root(n-k+1)(1/((1-k/n)^(n-k))) le 1/(n-k+1) ((n-k)/(1-k/n) + 1)`
		`= (n+1)/(n-k+1)`,
	</span>
	有
	<span class="formula">
		`(1-k/n)^(n-k)`
		`ge ((n-k+1)/(n+1))^(n-k+1)`
		`= (1-k/(n+1))^(n-k+1)`
		`ge "e"^-k`.
	</span>
	对任意 `epsi gt 0` 和任意正整数 `N`,
	因为对固定的 `k` 有 `lim_(n to oo) (1-k/n)^k = 1`,
	所以当 `n` 充分大时, 有
	<span class="formula">
		`(1-k/n)^k ge 1-epsi`, `quad k = 0, 1, cdots, N`.
	</span>
	不妨设 `n gt N`, 从而
	<span class="formula">
		`sum_(k=0)^(n-1) (1-k/n)^n`
		`ge sum_(k=0)^N (1-k/n)^(n-k) (1-k/n)^k`
		`ge (1-epsi) sum_(k=0)^N "e"^-k`.
	</span>
	令 `epsi to 0`, `N to oo` 就得到要证的不等式.
</p>

<ol class="proof">
  上一个证明中用到的两个不等式也可以这样证:
  <li>要证 `(1-k/n)^n le "e"^-k`, 令 `x = k/n`, 只需证
    <span class="formula">
      `1-x le "e"^-x`,
    </span>
    显然成立.
  </li>
  <li>要证 `(1-k/n)^(n-k) ge "e"^-k`, 令 `x = 1-k/n`, 只需证: `AA x in (0, 1]`,
    <span class="formula">
      `x^x ge "e"^(x-1)`, 换言之 `x ln x ge x-1`
    </span>
    `x = 1` 时上式等号成立; 又在 `(0, 1)` 上, 导数 `ln x lt 0`, 故不等式成立.
  </li>
</ol>

<h2>上极限与下极限</h2>

<p class="definition">
	设 `{x_n}` 是有界数列. 定义<b>上极限</b>和<b>下极限</b>
	<span class="formula">
		`underset(n to oo) bar lim x_n
		= underset(n ge 1)"inf" underset(k ge n) "sup" x_k`, `quad`
		`underset(n to oo) ul lim x_n
		= underset(n ge 1)"sup" underset(k ge n) "inf" x_k`.
	</span>
	其中 `{underset(k ge n) "sup" x_k}` 和 `{underset(k ge n) "inf" x_k}`
	称为 `{x_n}` 的<b>上控数列</b>和<b>下控数列</b>.
</p>

<p class="corollary">
	<span class="formula">
		`underset(n to oo) bar lim x_n
		= lim_(n to oo) underset(k ge n) "sup" x_k`, `quad`
		`underset(n to oo) ul lim x_n
		= lim_(n to oo) underset(k ge n) "inf" x_k`.
	</span>
</p>
<p class="proof">
	由习题 1.2 7(4) 知, 上控数列单调递减, 下控数列单调递增.
	显然它们都有界. 于是由单调有界原理, 它们的极限存在.
</p>

<p class="definition">
	设 `{x_n}` 为有界数列. 称 `a` 为 `{x_n}` 的一个<b>部分极限</b>, 如果
	`{x_n}` 有子列收敛到 `a`.
	记 `{x_n}` 的全体部分极限为 `L`, 则 `L != O/`.
</p>

<p class="theorem">
	设 `{x_n}` 为有界数列, 其全体部分极限为 `L`, 则
	<span class="formula">
		`underset(n to oo) bar lim x_n = max L`, `quad`
		`underset(n to oo) ul lim x_n = min L`.
	</span>
</p>
<div class="proof">
	<p> 先证 `underset(n to oo) bar lim x_n` 是 `L` 的一个上界.
		任取 `a in L`, 由定义知存在子列 `{x_(n_k)}` 以 `a` 为极限.
		在不等式
		<span class="formula">
			`x_(n_k) le underset(i ge n_k) "sup" x_i`, `k = 1, 2, cdots`
		</span>
		两端令 `k to oo`, 得 `a le underset(n to oo) bar lim x_n`.
	</p>
	<p> 现在说明 `underset(n to oo) bar lim x_n in L`.
		记 `u = underset(n to oo) bar lim x_n`,
		`bar x_n = underset(i ge n) "sup" x_i`.
		对任意 `k in NN`, 由 `lim_(n to oo) bar x_n = u` 知,
		存在充分大的 `N_k in NN`, 当 `n gt N_k` 时有
		<span class="formula">
			`|bar x_n - u| lt 1/k`.
		</span>
		再由 `bar x_n = underset(i ge n) "sup" x_i` 知, 存在 `n_k ge n`,
		使 `|x_(n_k) - bar x_n| lt 1/k`. 于是
		<span class="formula">
			`|x_(n_k) - u| le |x_(n_k) - bar x_n| + |bar x_n - u| lt 2/k`.
		</span>
		在取定 `n_k` 后, 只需令下一次的 `N_(k+1) ge n_k`, 就能保证
		`n_(k+1) ge n gt N_(k+1) ge n_k`. 所以 `{x_(n_k)}` 是收敛于 `u`
		的 `{x_n}` 的子列.
	<p>
</div>

<p class="theorem">
	设 `{x_n}` 是有界数列, 则 `{x_n}` 收敛的充要条件是
	`underset(n to oo) bar lim x_n = underset(n to oo) ul lim x_n`.
	这一条件成立时, 上极限, 下极限, 极限三者相等.
</p>
<div class="proof">
	记 `x_n` 的全体部分极限为 `L`.
	<p>必要性. 设 `x_n to a`, 则它的所有子列也收敛到 `a`. 从而 `|L| = 1`,
		显然有 `max L = min L`.
	</p>
	<p>充分性. 反设 `{x_n}` 不收敛, 由 Cauchy 收敛准则知,
		存在 `epsi_0 gt 0`, 对任意 `N_k in NN`, 存在 `m_k, n_k gt N`, 使
		<span class="formula">
			`|x_(m_k) - x_(n_k)| ge epsi_0`.
		</span>
		可以取 `N_1 = 1`, `N_(k+1) = max{m_k, n_k}`,
		这就保证 `{x_(m_k)}`, `{x_(n_k)}` 是两个子列.
		应用列紧性原理, 从 `{x_(m_k)}` 中选出一收敛子列,
		再从 `{x_(n_k)}` 的相应子数列中选出一收敛子列.
		这一子列与 `{x_(m_k)}` 的相应子列保持对应项的距离不小于 `epsi_0`,
		因此它们的极限不相等.
		于是 `L` 至少含两个不同实数, 从而 `max L != min L`.
	</p>
</div>

<h2>杂例</h2>

<ol class="example">
  <li>`lim_(n to oo) sin(pi sqrt(n^2+1)) = 0`;</li>
  <li>`lim_(n to oo) cos(pi sqrt(4n^2 + n)) = (sqrt 2)/2`.</li>
</ol>

<ol class="proof">
  <li>
    <span class="formula">
      `|sin(pi sqrt(n^2+1))|`
      `= |sin(n pi + (sqrt(n^2+1) - n) pi)|`
      `= |cos(n pi) sin[(sqrt(n^2+1)-n)pi]|`
      `= |sin {:pi/(sqrt(n^2+1)+n):}|`
      `to 0`.
    </span>
  </li>
  <li>
    原式等于
    <span class="formula">
      `cos(2pi n sqrt(1+1/(4n)))`
      `= cos(2pi n(1 + 1/(8n) + o(1/n)))`
      `= cos{:pi/4:} cos o(1) - sin{:pi/4:} sin o(1)`
      `to (sqrt 2)/2`.
    </span>
  </li>
</ol>

<p class="example">
  [来自群友 壹零叁]
  设数列 `{a_n}` 的每项都是正数, 且满足 `a_(n+2) = |a_(n+1) - a_n|`, 证明 `a_n to 0`.
</p>

<ol class="proof">
  <li>首先 `a_0, a_1` 不可能都是正整数, 否则由辗转相除法知道数列最终会在 `0` 和
    `gcd(a_0, a_1)` 之间振荡.
    同理 `a_0 // a_1 !in QQ`.
  </li>
  <li>
    令 `b_n = max(a_n, a_(n+1))`, 下证 `{b_n}` 单调减从而有极限.
    这是因为
    <span class="formula">
      `a_(n+1) le max(a_n, a_(n+1))`
      `= b_n`,<br>
      `a_(n+2) = |a_(n+1) - a_n|`
      `le max(a_n, a_(n+1))`
      `= b_n`,
    </span>
    从而 `b_(n+1) = max(a_(n+1), a_(n+2))` `le b_n`.
    设 `b_n to b`.  注意到 `a_(n+2) le b_n`, 因此只需证 `b = 0`.
  </li>
  <li>
    [来自群友 西伯利亚的猫猫]
    反设 `b gt 0`. 下证存在 `m` 使得 `a_m lt b`.
    事实上若对任意 `n`, `a_n ge b`, 由夹逼知道 `a_n to b`.
    从而对充分大的 `n` 有 `b lt a_n lt 2 b`, 于是 `a_(n+2) = |a_(n+1) - a_n| lt b`, 矛盾.
  </li>
  <li>
    根据辗转相除法, 在 `a_m` 的有限项后, 存在 `N`, 对于任意 `n ge N` 都有 `a_n le a_m lt b`.
    这与 `b_n to b` 矛盾. 所以必有 `b = 0`.
  </li>
  <hr>
  与正文无关: 由辗转相除法知道对任意 `n` 存在整数 `x, y` 使得
  <span class="formula">
    `a_n = x a_0 + y a_1`
  </span>
  问: `x, y` 互素吗?  `|x| + |y|` 单调增吗?
</ol>

<script src="../../js/note.js?type=math"></script>
</body>
</html>
